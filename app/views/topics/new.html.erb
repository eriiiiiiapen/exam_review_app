<%= turbo_frame_tag "modal" do %>
  <div class="fixed inset-0 bg-gray-900/60 flex items-center justify-center z-50 p-4" 
       data-action="click->modal#close">

    <div class="bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden">
      <div class="bg-blue-600 px-6 py-4 flex justify-between items-center">
        <h3 class="text-white font-bold text-lg flex items-center gap-2">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <%= @subject.name %> に論点を追加
        </h3>
        <%= link_to topics_path, data: { turbo_frame: "_top" }, class: "text-blue-200 hover:text-white" do %>
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path d="M6 18L18 6M6 6l12 12" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        <% end %>
      </div>

      <%= form_with(model: [@subject, @topic], class: "p-6 space-y-4") do |f| %>
        <div>
          <%= f.label :name, "論点名", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= f.text_field :name, autofocus: true, placeholder: "例：遺族基礎年金の支給要件", 
              class: "w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500" %>
        </div>

        <div>
            <%= f.label :description, "説明・メモ", class: "block text-sm font-medium text-gray-700" %>
            <%= f.text_area :description, rows: 4, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" %>
        </div>

        <div>
          <%= f.label :tag_list, "タグ（横断整理用）", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= f.text_field :tag_list, placeholder: "例：被保険者, 時効 (カンマ区切り)", 
              class: "w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm" %>
        </div>

        <div class="flex justify-end gap-3 pt-4 border-t">
          <%= link_to "キャンセル", topics_path, data: { turbo_frame: "_top" }, 
              class: "text-gray-500 hover:text-gray-700 px-4 py-2 text-sm font-medium" %>
          
          <%= f.submit "登録する", 
              class: "bg-blue-600 text-white px-6 py-2 rounded-lg text-sm font-bold hover:bg-blue-700 shadow-md cursor-pointer" %>
        </div>
      <% end %>
    </div>
  </div>
<% end %>